From 5884f68dd1f7c50e44f7be3a20c5d50924603521 Mon Sep 17 00:00:00 2001
From: ankita <ankitapareek@microsoft.com>
Date: Mon, 10 Mar 2025 13:43:04 +0530
Subject: [PATCH] junit: Add system properties to the junit file

Signed-off-by: ankita <ankitapareek@microsoft.com>
---
 lisa/notifiers/junit.py | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/lisa/notifiers/junit.py b/lisa/notifiers/junit.py
index 602fcb57..c70796b3 100644
--- a/lisa/notifiers/junit.py
+++ b/lisa/notifiers/junit.py
@@ -300,6 +300,18 @@ class JUnit(Notifier):
         testcase.attrib["classname"] = class_name
         testcase.attrib["time"] = self._get_elapsed_str(elapsed)
 
+        # Add a standard system-properties element for all test cases
+        if hasattr(message, 'information') and isinstance(message.information, dict):
+            # Create a system-properties element
+            system_props = ET.SubElement(testcase, "system-properties")
+            
+            # Add VM size and encrypt_disk if they exist
+            for key in ['vmsize', 'encrypt_disk']:
+                if key in message.information:
+                    prop = ET.SubElement(system_props, "property")
+                    prop.attrib["name"] = key
+                    prop.attrib["value"] = str(message.information[key])
+
         if message.status == TestStatus.FAILED:
             failure = ET.SubElement(testcase, "failure")
             failure.attrib["message"] = message.message
-- 
2.34.1
