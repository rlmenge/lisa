name: azure default
include:
  - path: ./azure.yml
variable:
  - name: platform_runbook
    value: ./azure.yml
  - name: location
    value: "westus3"
  - name: keep_environment
    value: "no"
  - name: resource_group_name
    value: ""
  - name: marketplace_image
    value: ""
  - name: shared_gallery
    value: ""
  - name: community_gallery_image
    value: ""
  - name: vhd
    value: ""
  - name: vm_size
    value: ""
  - name: deploy
    value: true
  - name: wait_delete
    value: false
  - name: concurrency
    value: 5
  - name: admin_private_key_file
    value: ""
    is_secret: true
  - name: admin_password
    value: ""
    is_secret: true
  - name: azure_arm_access_token
    value: ""
    is_secret: true
concurrency: $(concurrency)
notifier:
  - type: html
  - type: env_stats
  - type: junit
  - type: text_result
  - type: perfdump 
transformer:
- type: to_list
  items:
    images: $(marketplace_image)
    locations: $(location)
    vmsizes: $(vm_size)
  rename:
    to_list_images: marketplace_image_list
    to_list_locations: location_input_list
    to_list_vmsizes: vm_size_input_list
combinator:
  type: grid
  items:
    - name: marketplace_image
      value: $(marketplace_image_list)
    - name: location
      value: $(location_input_list)
    - name: vm_size
      value: $(vm_size_input_list)
